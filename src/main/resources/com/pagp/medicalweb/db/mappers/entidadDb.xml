<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pagp.medicalweb.db.mappers.EntidadDb">

	<select id="obtenerEntidades" resultType="EntidadEntity" parameterType="int" >
		SELECT * FROM entidades WHERE idAdministrador = #{value}
	</select>
	
	<select id="obtenerModulosEntidadActuales" resultType="ModuloContratadoEntity" parameterType="int" >
		SELECT * FROM moduloContratado
		WHERE activo = #{value} 
		and estatus = 1
	</select>
	
	 <insert id='crearSolicitud' parameterType='SolicitudEntity' useGeneratedKeys='true' keyProperty='idSolicitud'>
	   INSERT INTO solicitudes
	   	( tipo_solicitud, descripcion, impresion, idPaciente )
	    VALUES( #{tipo_solicitud}, #{descripcion}, #{impresion}, #{idPaciente}) 
 	 </insert>
 	 
 	  <insert id='crearReceta' parameterType='RecetaEntity' keyProperty='idReceta'>
	   INSERT INTO recetas
	   	( idReceta, comentarios )  VALUES( #{idReceta}, #{comentarios}) 
 	 </insert>
 	 
 	   <insert id='crearMedicamentoReceta' parameterType='MedicamentoRecetaEntity'>
		 	INSERT INTO "dbo"."receta_medicamento" 
		 		(idReceta,idMedicamento,dosis,toma,tipo_administracion,desde,hasta)
		 	 VALUES (#{idReceta},#{idMedicamento},#{dosis}
		 	 ,#{toma},#{tipo_administracion},#{desde},#{hasta})
	 	</insert>
	 	
 	   <insert id='crearDiagnostico' parameterType='DiagnosticoEntity'>
		 	INSERT INTO diagnostico
		 		(idDiagnostico,idDoctor,diagnostico,tratamiento)
		 	 VALUES (#{idDiagnostico},#{idDoctor},#{diagnostico} ,#{tratamiento})
	 	</insert>
	 	 
</mapper>